<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HP6XZJLHP5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-HP6XZJLHP5');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MoltPhone ‚Äî AI Phone Calls</title>
  <meta name="description"
    content="Make AI phone calls instantly. Enter a number, describe the task, and let AI handle the conversation.">
  <meta property="og:title" content="MoltPhone ‚Äî AI Phone Calls">
  <meta property="og:description"
    content="Make AI phone calls instantly. Enter a number, describe the task, and let AI handle the conversation.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://app.moltphone.xyz">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìû</text></svg>">
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: #09090b;
      --surface: #131316;
      --surface-2: #18181b;
      --border: #27272a;
      --border-light: #3f3f46;
      --text: #fafafa;
      --text-secondary: #d4d4d8;
      --text-muted: #a1a1aa;
      --text-dim: #71717a;
      --accent: #22c55e;
      --accent-hover: #16a34a;
      --accent-dim: rgba(34, 197, 94, 0.1);
      --accent-glow: rgba(34, 197, 94, 0.15);
      --danger: #ef4444;
      --warning: #f59e0b;
      --blue: #3b82f6;
      --radius: 12px;
      --radius-sm: 8px;
      --radius-lg: 16px;
      --transition: 0.2s ease;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Inter, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    .container {
      max-width: 1080px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .container-sm {
      max-width: 640px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(9, 9, 11, 0.85);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
    }

    header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 64px;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo span {
      color: var(--accent);
    }

    .nav-links {
      display: flex;
      gap: 28px;
      align-items: center;
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color var(--transition);
    }

    .nav-links a:hover {
      color: var(--text);
    }

    .nav-cta {
      background: var(--accent) !important;
      color: #fff !important;
      padding: 8px 18px;
      border-radius: var(--radius-sm);
      font-weight: 600;
    }

    .nav-cta:hover {
      background: var(--accent-hover) !important;
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: var(--text);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 4px;
    }

    /* ‚îÄ‚îÄ‚îÄ Hero ‚îÄ‚îÄ‚îÄ */
    .hero {
      padding: 100px 0 80px;
      text-align: center;
      position: relative;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -80px;
      left: 50%;
      transform: translateX(-50%);
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
      pointer-events: none;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--accent-dim);
      border: 1px solid rgba(34, 197, 94, 0.2);
      color: var(--accent);
      padding: 6px 16px;
      border-radius: 100px;
      font-size: 0.85rem;
      font-weight: 500;
      margin-bottom: 24px;
    }

    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -0.03em;
      margin-bottom: 16px;
    }

    .hero h1 em {
      font-style: normal;
      background: linear-gradient(135deg, var(--accent), #4ade80);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      color: var(--text-muted);
      font-size: 1.15rem;
      max-width: 520px;
      margin: 0 auto 36px;
    }

    .hero-cta {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: var(--accent);
      color: #fff;
      padding: 16px 32px;
      border-radius: var(--radius);
      font-size: 1.1rem;
      font-weight: 600;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all var(--transition);
      box-shadow: 0 0 40px var(--accent-glow);
    }

    .hero-cta:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 8px 40px rgba(34, 197, 94, 0.3);
    }

    .hero-stats {
      display: flex;
      justify-content: center;
      gap: 48px;
      margin-top: 60px;
      padding-top: 40px;
      border-top: 1px solid var(--border);
    }

    .hero-stat {
      text-align: center;
    }

    .hero-stat .num {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    .hero-stat .label {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    /* ‚îÄ‚îÄ‚îÄ Sections ‚îÄ‚îÄ‚îÄ */
    section {
      padding: 80px 0;
    }

    .section-label {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent);
      margin-bottom: 12px;
    }

    .section-title {
      font-size: clamp(1.75rem, 4vw, 2.25rem);
      font-weight: 700;
      margin-bottom: 16px;
      letter-spacing: -0.02em;
    }

    .section-desc {
      color: var(--text-muted);
      font-size: 1.05rem;
      max-width: 560px;
      margin-bottom: 48px;
    }

    .section-center {
      text-align: center;
    }

    .section-center .section-desc {
      margin-left: auto;
      margin-right: auto;
    }

    /* ‚îÄ‚îÄ‚îÄ Make a Call ‚îÄ‚îÄ‚îÄ */
    #call {
      padding-top: 40px;
    }

    .call-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 40px;
      position: relative;
      overflow: hidden;
    }

    .call-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--blue));
    }

    .call-card h2 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .call-card .subtitle {
      color: var(--text-muted);
      margin-bottom: 32px;
      font-size: 0.95rem;
    }

    .rate-limit-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 10px 16px;
      margin-bottom: 28px;
      font-size: 0.85rem;
    }

    .rate-dots {
      display: flex;
      gap: 6px;
    }

    .rate-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent);
      transition: all var(--transition);
    }

    .rate-dot.used {
      background: var(--border);
    }

    .rate-text {
      color: var(--text-muted);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .form-label .req {
      color: var(--accent);
    }

    .form-hint {
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-top: 6px;
    }

    input[type="text"],
    input[type="tel"],
    textarea,
    select {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text);
      font-size: 0.95rem;
      font-family: inherit;
      transition: border-color var(--transition), box-shadow var(--transition);
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-dim);
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--text-dim);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    select {
      cursor: pointer;
    }

    option {
      background: var(--bg);
    }

    /* Phone input */
    .phone-row {
      display: flex;
      gap: 10px;
    }

    .country-select {
      width: 140px;
      flex-shrink: 0;
      padding: 12px 10px;
      font-size: 0.9rem;
    }

    .phone-input {
      flex: 1;
      font-size: 1.1rem;
      letter-spacing: 0.5px;
    }

    /* Call button */
    .call-btn {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: var(--radius);
      font-size: 1.05rem;
      font-weight: 700;
      cursor: pointer;
      transition: all var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 8px;
    }

    .call-btn:hover:not(:disabled) {
      background: var(--accent-hover);
      transform: translateY(-1px);
      box-shadow: 0 8px 30px rgba(34, 197, 94, 0.25);
    }

    .call-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .call-btn .spinner {
      width: 20px;
      height: 20px;
      border: 2.5px solid rgba(255, 255, 255, 0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Call status overlay */
    .call-status-card {
      display: none;
      text-align: center;
      padding: 48px 24px;
    }

    .call-status-card.active {
      display: block;
    }

    .call-status-icon {
      font-size: 3.5rem;
      margin-bottom: 16px;
    }

    .call-status-icon.ringing {
      animation: ring 1.5s ease-in-out infinite;
    }

    @keyframes ring {

      0%,
      100% {
        transform: rotate(0);
      }

      10%,
      30% {
        transform: rotate(-12deg);
      }

      20%,
      40% {
        transform: rotate(12deg);
      }

      50% {
        transform: rotate(0);
      }
    }

    .call-status-text {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .call-status-sub {
      color: var(--text-muted);
      font-size: 0.95rem;
      margin-bottom: 24px;
    }

    .call-timer-display {
      font-family: 'SF Mono', SFMono-Regular, Consolas, monospace;
      font-size: 2rem;
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 28px;
    }

    .wave-container {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 4px;
      height: 32px;
      margin-bottom: 28px;
    }

    .wave-bar {
      width: 4px;
      border-radius: 2px;
      background: var(--accent);
      animation: wave 1.2s ease-in-out infinite;
    }

    .wave-bar:nth-child(1) {
      height: 8px;
      animation-delay: 0s;
    }

    .wave-bar:nth-child(2) {
      height: 16px;
      animation-delay: 0.1s;
    }

    .wave-bar:nth-child(3) {
      height: 24px;
      animation-delay: 0.2s;
    }

    .wave-bar:nth-child(4) {
      height: 12px;
      animation-delay: 0.3s;
    }

    .wave-bar:nth-child(5) {
      height: 20px;
      animation-delay: 0.4s;
    }

    @keyframes wave {

      0%,
      100% {
        transform: scaleY(0.4);
        opacity: 0.5;
      }

      50% {
        transform: scaleY(1);
        opacity: 1;
      }
    }

    .end-call-btn {
      background: var(--danger);
      color: #fff;
      border: none;
      padding: 14px 40px;
      border-radius: 100px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
    }

    .end-call-btn:hover {
      background: #dc2626;
      transform: translateY(-1px);
    }

    /* Call result */
    .call-result {
      display: none;
    }

    .call-result.active {
      display: block;
    }

    .result-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .result-icon {
      font-size: 3rem;
      margin-bottom: 12px;
    }

    .result-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .result-sub {
      color: var(--text-muted);
    }

    .result-box {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 16px;
    }

    .result-box h4 {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .result-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    .result-btn {
      flex: 1;
      min-width: 140px;
      padding: 12px 20px;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
      border: none;
    }

    .result-btn-primary {
      background: var(--accent);
      color: #fff;
    }

    .result-btn-primary:hover {
      background: var(--accent-hover);
    }

    .result-btn-secondary {
      background: var(--surface-2);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .result-btn-secondary:hover {
      background: var(--border);
    }

    /* Error/success messages */
    .msg-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fca5a5;
      padding: 12px 16px;
      border-radius: var(--radius-sm);
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    /* ‚îÄ‚îÄ‚îÄ How it Works ‚îÄ‚îÄ‚îÄ */
    .steps-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }

    .step-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px 24px;
      text-align: center;
      position: relative;
      transition: border-color var(--transition);
    }

    .step-card:hover {
      border-color: var(--accent);
    }

    .step-num {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-dim);
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 16px;
    }

    .step-icon {
      font-size: 2rem;
      margin-bottom: 12px;
    }

    .step-card h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .step-card p {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* ‚îÄ‚îÄ‚îÄ Pricing ‚îÄ‚îÄ‚îÄ */
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }

    .pricing-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px;
      position: relative;
    }

    .pricing-card.featured {
      border-color: var(--accent);
      box-shadow: 0 0 40px var(--accent-glow);
    }

    .pricing-card.featured::before {
      content: 'POPULAR';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: #fff;
      padding: 4px 16px;
      border-radius: 100px;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.05em;
    }

    .pricing-tier {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }

    .pricing-price {
      font-size: 2.25rem;
      font-weight: 800;
      margin-bottom: 4px;
    }

    .pricing-price span {
      font-size: 0.9rem;
      font-weight: 400;
      color: var(--text-muted);
    }

    .pricing-desc {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 24px;
    }

    .pricing-features {
      list-style: none;
      margin-bottom: 28px;
    }

    .pricing-features li {
      padding: 8px 0;
      font-size: 0.9rem;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pricing-features li::before {
      content: '‚úì';
      color: var(--accent);
      font-weight: 700;
      flex-shrink: 0;
    }

    .pricing-btn {
      display: block;
      width: 100%;
      padding: 12px;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
      text-decoration: none;
      cursor: pointer;
      border: 1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      transition: all var(--transition);
    }

    .pricing-btn:hover {
      background: var(--border);
    }

    .pricing-btn.primary {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }

    .pricing-btn.primary:hover {
      background: var(--accent-hover);
    }

    /* ‚îÄ‚îÄ‚îÄ Recent Calls ‚îÄ‚îÄ‚îÄ */
    .calls-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .call-item {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: border-color var(--transition);
    }

    .call-item:hover {
      border-color: var(--border-light);
    }

    .call-item-left {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .call-item-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-dim);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    .call-item-number {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .call-item-task {
      color: var(--text-muted);
      font-size: 0.85rem;
      max-width: 300px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .call-item-right {
      text-align: right;
    }

    .call-item-time {
      font-size: 0.8rem;
      color: var(--text-dim);
    }

    .call-item-status {
      font-size: 0.75rem;
      font-weight: 600;
      padding: 2px 10px;
      border-radius: 100px;
      display: inline-block;
      margin-top: 4px;
    }

    .status-completed {
      background: var(--accent-dim);
      color: var(--accent);
    }

    .status-failed {
      background: rgba(239, 68, 68, 0.1);
      color: #f87171;
    }

    .status-calling {
      background: rgba(59, 130, 246, 0.1);
      color: var(--blue);
    }

    .empty-calls {
      text-align: center;
      padding: 48px;
      color: var(--text-dim);
    }

    .empty-calls-icon {
      font-size: 2.5rem;
      margin-bottom: 12px;
    }

    .clear-history-btn {
      background: none;
      border: 1px solid var(--border);
      color: var(--text-muted);
      padding: 8px 16px;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all var(--transition);
      margin-top: 16px;
    }

    .clear-history-btn:hover {
      border-color: var(--danger);
      color: var(--danger);
    }

    /* ‚îÄ‚îÄ‚îÄ API Section ‚îÄ‚îÄ‚îÄ */
    .api-section {
      background: var(--surface);
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
    }

    .code-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      overflow-x: auto;
      position: relative;
    }

    .code-block pre {
      font-family: 'SF Mono', SFMono-Regular, Consolas, 'Liberation Mono', monospace;
      font-size: 0.85rem;
      line-height: 1.7;
      color: var(--text-secondary);
    }

    .code-copy {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all var(--transition);
    }

    .code-copy:hover {
      color: var(--text);
      border-color: var(--border-light);
    }

    .api-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      align-items: start;
    }

    .api-info h3 {
      font-size: 1.1rem;
      margin-bottom: 12px;
    }

    .api-info p {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 16px;
    }

    .api-endpoint {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--bg);
      border: 1px solid var(--border);
      padding: 8px 14px;
      border-radius: var(--radius-sm);
      font-family: monospace;
      font-size: 0.85rem;
      color: var(--accent);
    }

    .api-method {
      background: var(--accent);
      color: #fff;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 700;
    }

    /* ‚îÄ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ */
    footer {
      border-top: 1px solid var(--border);
      padding: 40px 0;
      text-align: center;
      color: var(--text-dim);
      font-size: 0.85rem;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* ‚îÄ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ‚îÄ */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .nav-links.open {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 64px;
        left: 0;
        right: 0;
        background: var(--bg);
        border-bottom: 1px solid var(--border);
        padding: 16px 24px;
        gap: 16px;
      }

      .mobile-menu-btn {
        display: block;
      }

      .hero {
        padding: 60px 0 50px;
      }

      .hero-stats {
        gap: 24px;
        flex-wrap: wrap;
      }

      .call-card {
        padding: 24px;
      }

      .steps-grid {
        grid-template-columns: 1fr;
      }

      .pricing-grid {
        grid-template-columns: 1fr;
      }

      .api-grid {
        grid-template-columns: 1fr;
      }

      .phone-row {
        flex-direction: column;
      }

      .country-select {
        width: 100%;
      }

      .call-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .call-item-right {
        text-align: left;
      }

      .result-actions {
        flex-direction: column;
      }
    }

    /* ‚îÄ‚îÄ‚îÄ Auth ‚îÄ‚îÄ‚îÄ */
    .auth-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .auth-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 8px 18px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all var(--transition);
    }

    .auth-btn:hover {
      background: var(--accent-hover);
    }

    .auth-btn.secondary {
      background: var(--surface-2);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .auth-btn.secondary:hover {
      background: var(--border);
    }

    .auth-user {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.9rem;
    }

    .auth-user-avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent);
    }

    .auth-user-email {
      color: var(--text-secondary);
      max-width: 160px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .auth-user-badge {
      background: var(--accent-dim);
      color: var(--accent);
      padding: 2px 8px;
      border-radius: 100px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    .logout-btn {
      background: none;
      border: none;
      color: var(--text-dim);
      cursor: pointer;
      font-size: 0.85rem;
      padding: 4px 8px;
    }

    .logout-btn:hover {
      color: var(--danger);
    }

    /* ‚îÄ‚îÄ‚îÄ Modal ‚îÄ‚îÄ‚îÄ */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px;
      width: 90%;
      max-width: 420px;
    }

    .modal h2 {
      font-size: 1.3rem;
      margin-bottom: 8px;
    }

    .modal .subtitle {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 24px;
    }

    .modal .form-group {
      margin-bottom: 16px;
    }

    .modal-btn {
      width: 100%;
      padding: 14px;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: var(--radius-sm);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
    }

    .modal-btn:hover {
      background: var(--accent-hover);
    }

    .modal-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .modal-close {
      float: right;
      background: none;
      border: none;
      color: var(--text-dim);
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 1;
    }

    .modal-close:hover {
      color: var(--text);
    }

    .modal-switch {
      text-align: center;
      margin-top: 16px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .modal-switch a {
      color: var(--accent);
      cursor: pointer;
      text-decoration: none;
    }

    .modal-switch a:hover {
      text-decoration: underline;
    }

    .modal-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fca5a5;
      padding: 10px 14px;
      border-radius: var(--radius-sm);
      margin-bottom: 16px;
      font-size: 0.85rem;
      display: none;
    }

    .modal-success {
      background: var(--accent-dim);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: var(--accent);
      padding: 10px 14px;
      border-radius: var(--radius-sm);
      margin-bottom: 16px;
      font-size: 0.85rem;
      display: none;
    }

    /* ‚îÄ‚îÄ‚îÄ Upgrade Banner ‚îÄ‚îÄ‚îÄ */
    .upgrade-banner {
      display: none;
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(59, 130, 246, 0.1));
      border: 1px solid rgba(34, 197, 94, 0.2);
      border-radius: var(--radius);
      padding: 16px 20px;
      margin-bottom: 24px;
      text-align: center;
    }

    .upgrade-banner.active {
      display: block;
    }

    .upgrade-banner p {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .upgrade-banner .upgrade-link {
      color: var(--accent);
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
    }

    /* ‚îÄ‚îÄ‚îÄ Call Detail Page ‚îÄ‚îÄ‚îÄ */
    .call-detail-page {
      display: none;
      min-height: 100vh;
      padding-top: 24px;
      padding-bottom: 80px;
    }

    .call-detail-page.active {
      display: block;
    }

    .call-detail-back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.9rem;
      margin-bottom: 24px;
      cursor: pointer;
      transition: color var(--transition);
      background: none;
      border: none;
      font-family: inherit;
    }

    .call-detail-back:hover {
      color: var(--accent);
    }

    .call-detail-title-row {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 8px;
    }

    .call-detail-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .call-detail-subtitle {
      color: var(--text-muted);
      font-size: 0.95rem;
      margin-bottom: 32px;
    }

    .detail-meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      margin-bottom: 28px;
    }

    .detail-meta-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
    }

    .detail-meta-card .meta-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-dim);
      margin-bottom: 6px;
    }

    .detail-meta-card .meta-value {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text);
    }

    .detail-meta-card .meta-value.accent {
      color: var(--accent);
    }

    .detail-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
    }

    .detail-section-title {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .config-item {
      margin-bottom: 14px;
    }

    .config-item:last-child {
      margin-bottom: 0;
    }

    .config-label {
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-bottom: 4px;
    }

    .config-value {
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .config-value.mono {
      font-family: 'SF Mono', SFMono-Regular, Consolas, monospace;
      font-size: 0.85rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px;
    }

    /* Transcript bubbles */
    .transcript-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .transcript-empty {
      text-align: center;
      padding: 32px;
      color: var(--text-dim);
    }

    .transcript-bubble {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: var(--radius);
      font-size: 0.9rem;
      line-height: 1.5;
      position: relative;
    }

    .transcript-bubble.ai {
      background: var(--accent-dim);
      border: 1px solid rgba(34, 197, 94, 0.2);
      align-self: flex-start;
    }

    .transcript-bubble.user {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      align-self: flex-end;
    }

    .transcript-role {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      margin-bottom: 4px;
    }

    .transcript-bubble.ai .transcript-role {
      color: var(--accent);
    }

    .transcript-bubble.user .transcript-role {
      color: var(--blue);
    }

    .transcript-content {
      color: var(--text-secondary);
    }

    .transcript-time {
      font-size: 0.7rem;
      color: var(--text-dim);
      margin-top: 4px;
    }

    .detail-loading {
      text-align: center;
      padding: 80px 24px;
      color: var(--text-dim);
    }

    .detail-loading .spinner-large {
      width: 36px;
      height: 36px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }

    .detail-error {
      text-align: center;
      padding: 80px 24px;
      color: var(--text-dim);
    }

    .detail-error-icon {
      font-size: 2.5rem;
      margin-bottom: 12px;
    }

    .call-detail-status-badge {
      font-size: 0.75rem;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: 100px;
      display: inline-block;
    }

    @media (max-width: 768px) {
      .detail-meta-grid {
        grid-template-columns: 1fr 1fr;
      }

      .transcript-bubble {
        max-width: 95%;
      }
    }

    /* ‚îÄ‚îÄ‚îÄ Smooth scroll ‚îÄ‚îÄ‚îÄ */
    html {
      scroll-behavior: smooth;
    }

    /* ‚îÄ‚îÄ‚îÄ Animations ‚îÄ‚îÄ‚îÄ */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeIn 0.6s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in:nth-child(2) {
      animation-delay: 0.1s;
    }

    .fade-in:nth-child(3) {
      animation-delay: 0.2s;
    }

    /* ‚îÄ‚îÄ‚îÄ Dashboard Panel ‚îÄ‚îÄ‚îÄ */
    .dashboard-panel {
      display: none;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 28px 32px;
      margin-bottom: 32px;
    }

    .dashboard-panel.active {
      display: block;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .dashboard-header h3 {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }

    /* API Key Card */
    .apikey-card {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
    }

    .apikey-card .label {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
    }

    .apikey-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .apikey-value {
      flex: 1;
      font-family: 'SF Mono', SFMono-Regular, Consolas, monospace;
      font-size: 0.85rem;
      color: var(--text-secondary);
      background: var(--surface-2);
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid var(--border);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .apikey-copy,
    .apikey-toggle {
      background: var(--surface-2);
      border: 1px solid var(--border);
      color: var(--text-muted);
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all var(--transition);
      white-space: nowrap;
    }

    .apikey-copy:hover,
    .apikey-toggle:hover {
      color: var(--text);
      border-color: var(--border-light);
    }

    /* Token Balance Card */
    .token-card {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
    }

    .token-card .label {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
    }

    .token-balance {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 8px;
    }

    .token-balance span {
      font-size: 0.9rem;
      font-weight: 400;
      color: var(--text-muted);
    }

    .token-buy-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
    }

    .token-buy-btn:hover {
      background: var(--accent-hover);
    }

    /* ‚îÄ‚îÄ‚îÄ Token Purchase Modal ‚îÄ‚îÄ‚îÄ */
    .pkg-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    @media (max-width: 768px) {
      .pkg-grid {
        grid-template-columns: 1fr;
      }
    }

    .pkg-card {
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition);
    }

    .pkg-card:hover {
      border-color: var(--accent);
    }

    .pkg-card.selected {
      border-color: var(--accent);
      background: var(--accent-dim);
    }

    .pkg-card .pkg-name {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 4px;
    }

    .pkg-card .pkg-tokens {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .pkg-card .pkg-price {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .pkg-card .pkg-rate {
      font-size: 0.75rem;
      color: var(--text-dim);
      margin-top: 4px;
    }

    /* API Key Success Card */
    .apikey-success-card {
      background: var(--bg);
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
    }

    .apikey-success-card .label {
      font-size: 0.8rem;
      color: var(--accent);
      margin-bottom: 8px;
      font-weight: 600;
    }

    .apikey-success-card .key-display {
      font-family: 'SF Mono', SFMono-Regular, Consolas, monospace;
      font-size: 0.9rem;
      color: var(--text);
      background: var(--surface-2);
      padding: 10px 14px;
      border-radius: 6px;
      border: 1px solid var(--border);
      word-break: break-all;
      margin-bottom: 8px;
    }

    .apikey-success-card .copy-key-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
    }

    .apikey-success-card .copy-key-btn:hover {
      background: var(--accent-hover);
    }
  </style>
</head>

<body>

  <!-- Call Detail Page (hidden by default, shown via hash routing) -->
  <section class="call-detail-page" id="call-detail-page">
    <div class="container-sm">
      <button class="call-detail-back" onclick="navigateHome()">
        ‚Üê Back to MoltPhone
      </button>
      <div id="call-detail-content">
        <div class="detail-loading" id="detail-loading">
          <div class="spinner-large"></div>
          <div>Loading call details...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content Wrapper -->
  <div id="main-content">

    <!-- Header -->
    <header>
      <div class="container">
        <a href="#" class="logo">üìû Molt<span>Phone</span></a>
        <nav class="nav-links" id="nav-links">
          <a href="#call">Make a Call</a>
          <a href="#how">How It Works</a>
          <a href="#pricing">Pricing</a>
          <a href="#history">History</a>
          <a href="#api">API</a>
        </nav>
        <div class="auth-area" id="auth-area">
          <button class="auth-btn" id="auth-btn" onclick="showAuthModal()">Sign Up</button>
        </div>
        <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Menu">‚ò∞</button>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero">
      <div class="container">
        <div class="hero-badge">üü¢ Live ‚Äî Make calls now</div>
        <h1>AI <em>Phone Calls</em>,<br>Made Simple</h1>
        <p>Enter a number, tell the AI what to say, and it handles the conversation. Appointments, inquiries,
          reservations
          ‚Äî done in seconds.</p>
        <a href="#call" class="hero-cta">üìû Make a Call</a>
        <div class="hero-stats">
          <div class="hero-stat">
            <div class="num">3</div>
            <div class="label">Free calls / hour</div>
          </div>
          <div class="hero-stat">
            <div class="num">30s</div>
            <div class="label">Average setup time</div>
          </div>
          <div class="hero-stat">
            <div class="num">50+</div>
            <div class="label">Countries supported</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Dashboard Panel (shown when logged in) -->
    <section id="dashboard-section">
      <div class="container-sm">
        <div class="dashboard-panel" id="dashboard-panel">
          <div class="dashboard-header">
            <h3>üë§ My Account</h3>
            <button class="auth-btn secondary" onclick="logout()" style="font-size:0.8rem;padding:6px 14px">Sign
              Out</button>
          </div>
          <div class="dashboard-grid">
            <div class="apikey-card">
              <div class="label">API Key</div>
              <div class="apikey-row">
                <div class="apikey-value" id="dash-apikey">mp_‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
                <button class="apikey-toggle" id="dash-toggle" onclick="toggleApiKeyVisibility()">Show</button>
                <button class="apikey-copy" id="dash-copy" onclick="copyDashApiKey()">Copy</button>
              </div>
            </div>
            <div class="token-card">
              <div class="label">Token Balance</div>
              <div class="token-balance"><span id="dash-token-balance">0</span> <span>tokens</span></div>
              <button class="token-buy-btn" onclick="openPurchaseModal()">‚ö° Buy Tokens</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Make a Call -->
    <section id="call">
      <div class="container-sm">
        <!-- Call Form -->
        <div class="call-card" id="call-form-card">
          <h2>üìû Make a Call</h2>
          <p class="subtitle">Your AI assistant will call and handle the conversation.</p>

          <div class="upgrade-banner" id="upgrade-banner">
            <p>‚ö° You've used your free calls. Sign up for more!</p>
            <a class="upgrade-link" onclick="auth0Login()">Create Free Account ‚Üí</a>
          </div>

          <div class="rate-limit-bar" id="rate-limit-bar">
            <div class="rate-dots" id="rate-dots">
              <div class="rate-dot"></div>
              <div class="rate-dot"></div>
              <div class="rate-dot"></div>
            </div>
            <span class="rate-text"><span id="calls-remaining">3</span> calls remaining this hour</span>
          </div>

          <div id="form-error"></div>

          <form id="call-form" autocomplete="off">
            <div class="form-group">
              <label class="form-label">Phone Number <span class="req">*</span></label>
              <div class="phone-row">
                <select class="country-select" id="country-code">
                  <option value="+1">üá∫üá∏ +1</option>
                  <option value="+44">üá¨üáß +44</option>
                  <option value="+33">üá´üá∑ +33</option>
                  <option value="+49">üá©üá™ +49</option>
                  <option value="+34">üá™üá∏ +34</option>
                  <option value="+39">üáÆüáπ +39</option>
                  <option value="+31">üá≥üá± +31</option>
                  <option value="+46">üá∏üá™ +46</option>
                  <option value="+47">üá≥üá¥ +47</option>
                  <option value="+61">üá¶üá∫ +61</option>
                  <option value="+81">üáØüáµ +81</option>
                  <option value="+82">üá∞üá∑ +82</option>
                  <option value="+86">üá®üá≥ +86</option>
                  <option value="+91">üáÆüá≥ +91</option>
                  <option value="+351">üáµüáπ +351</option>
                  <option value="+353">üáÆüá™ +353</option>
                  <option value="+356">üá≤üáπ +356</option>
                  <option value="+350">üá¨üáÆ +350</option>
                  <option value="+971">üá¶üá™ +971</option>
                  <option value="+972">üáÆüá± +972</option>
                  <option value="+55">üáßüá∑ +55</option>
                  <option value="+52">üá≤üáΩ +52</option>
                </select>
                <input type="tel" class="phone-input" id="phone-number" placeholder="555 123 4567" required>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="first-message">What should the AI say first? <span
                  class="req">*</span></label>
              <textarea id="first-message"
                placeholder="e.g. Hi, I'd like to make a reservation for 2 people this Saturday at 8pm. My name is Alex."
                required></textarea>
              <div class="form-hint">This is the opening line the AI will say when the call connects.</div>
            </div>

            <div class="form-group">
              <label class="form-label" for="prompt-preset">Quick Preset</label>
              <select id="prompt-preset" onchange="applyPreset(this.value)">
                <option value="">‚Äî Choose a preset or write your own ‚Äî</option>
                <option value="restaurant">üçΩÔ∏è Restaurant Reservation</option>
                <option value="inquiry">üìû Business Inquiry</option>
                <option value="appointment">üìÖ Appointment Booking</option>
                <option value="taxi">üöï Taxi / Ride Booking</option>
                <option value="cancel">‚ùå Cancel or Reschedule</option>
                <option value="sales">üíº Sales Outreach</option>
                <option value="marketing">üì£ Marketing Follow-up</option>
                <option value="home_price">üè† Home Price Inquiry</option>
                <option value="rent_inquiry">üîë Rent Inquiry</option>
                <option value="support">üõü Customer Support</option>
                <option value="debt">üí≥ Debt Collection</option>
                <option value="custom" selected>‚úèÔ∏è Custom</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="system-prompt">System Prompt <span class="req">*</span></label>
              <textarea id="system-prompt"
                required>You are a polite and professional personal assistant making a phone call on behalf of your client. Be concise, stay on topic, and confirm all important details before ending the call. Once the task is complete, say goodbye politely and end your final message with [END_CALL].</textarea>
              <div class="form-hint">Instructions that guide the AI's behavior during the call. Pick a preset above or
                write your own.</div>
            </div>

            <div class="form-group">
              <label class="form-label" for="agent-name">Caller Name <span
                  style="color:var(--text-dim)">(optional)</span></label>
              <input type="text" id="agent-name" placeholder="e.g. Alex's Assistant">
              <div class="form-hint">The AI will introduce itself with this name.</div>
            </div>

            <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
              <div class="form-group">
                <label class="form-label" for="voice-select">Voice <span
                    style="color:var(--text-dim)">(optional)</span></label>
                <select id="voice-select">
                  <option value="alice" selected>Alice (Female, US)</option>
                  <option value="Google.en-US-Standard-C">Google Standard C (Female)</option>
                  <option value="Google.en-US-Standard-D">Google Standard D (Male)</option>
                  <option value="Google.en-GB-Standard-A">Google UK A (Female)</option>
                  <option value="Google.en-GB-Standard-B">Google UK B (Male)</option>
                  <option value="Polly.Joanna">Polly Joanna (Female)</option>
                  <option value="Polly.Matthew">Polly Matthew (Male)</option>
                  <option value="man">Man (Classic)</option>
                  <option value="woman">Woman (Classic)</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label" for="model-select">AI Model <span
                    style="color:var(--text-dim)">(optional)</span></label>
                <select id="model-select">
                  <option value="gpt-4o-mini" selected>GPT-4o Mini (Fast)</option>
                  <option value="gpt-4o">GPT-4o (Balanced)</option>
                  <option value="gpt-4.1">GPT-4.1 (Advanced)</option>
                  <option value="gpt-5.1">GPT-5.1 (Latest)</option>
                  <option value="claude-sonnet-4-20250514">Claude Sonnet 4</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="error-message">Error Recovery Message <span
                  style="color:var(--text-dim)">(optional)</span></label>
              <input type="text" id="error-message" value="Sorry, I didn't catch that. Could you repeat?">
              <div class="form-hint">What the AI says when it can't understand the other party.</div>
            </div>

            <button type="submit" class="call-btn" id="call-btn">
              <span id="call-btn-text">üìû Call Now ‚Äî Free</span>
            </button>
          </form>
        </div>

        <!-- Call In Progress -->
        <div class="call-card call-status-card" id="call-progress">
          <div class="call-status-icon ringing" id="call-icon">üìû</div>
          <div class="call-status-text" id="status-text">Initiating call...</div>
          <div class="call-status-sub" id="status-number"></div>
          <div class="call-timer-display" id="call-timer">00:00</div>
          <div class="wave-container" id="wave-container" style="display:none">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
          </div>
          <button class="end-call-btn" id="end-call-btn">‚úï End Call</button>
        </div>

        <!-- Call Result -->
        <div class="call-card call-result" id="call-result">
          <div class="result-header">
            <div class="result-icon" id="result-icon">‚úÖ</div>
            <div class="result-title" id="result-title">Call Complete</div>
            <div class="result-sub" id="result-sub"></div>
          </div>
          <div class="result-box" id="result-details-box">
            <h4>Call Details</h4>
            <div id="result-details"></div>
          </div>
          <div class="result-actions">
            <button class="result-btn result-btn-primary" id="new-call-btn">üìû New Call</button>
            <button class="result-btn result-btn-secondary" id="copy-result-btn">üìã Copy Details</button>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section id="how">
      <div class="container section-center">
        <div class="section-label">How It Works</div>
        <div class="section-title">Three simple steps</div>
        <div class="section-desc">No signup needed. Just describe your call and we handle the rest.</div>
        <div class="steps-grid">
          <div class="step-card fade-in">
            <div class="step-num">1</div>
            <div class="step-icon">üì±</div>
            <h3>Enter a Number</h3>
            <p>Type the phone number you want to call with international format support.</p>
          </div>
          <div class="step-card fade-in">
            <div class="step-num">2</div>
            <div class="step-icon">üí¨</div>
            <h3>Describe the Task</h3>
            <p>Tell the AI what to say ‚Äî make a reservation, ask a question, schedule a meeting.</p>
          </div>
          <div class="step-card fade-in">
            <div class="step-num">3</div>
            <div class="step-icon">ü§ñ</div>
            <h3>AI Makes the Call</h3>
            <p>Our AI calls the number, handles the conversation naturally, and reports back.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section id="pricing">
      <div class="container section-center">
        <div class="section-label">Pricing</div>
        <div class="section-title">Simple, transparent pricing</div>
        <div class="section-desc">Start free. Scale when you need to.</div>
        <div class="pricing-grid">
          <div class="pricing-card">
            <div class="pricing-tier">Starter</div>
            <div class="pricing-price">$10 <span>/ 100 tokens</span></div>
            <div class="pricing-desc">Try it out, get started fast</div>
            <ul class="pricing-features">
              <li>100 call tokens</li>
              <li>Standard AI voice</li>
              <li>Call status tracking</li>
              <li>50+ countries</li>
            </ul>
            <button class="pricing-btn primary" onclick="openPurchaseModal('starter')">Buy Starter</button>
          </div>
          <div class="pricing-card featured">
            <div class="pricing-tier">Pro</div>
            <div class="pricing-price">$40 <span>/ 500 tokens</span></div>
            <div class="pricing-desc">Best value for regular users</div>
            <ul class="pricing-features">
              <li>500 call tokens</li>
              <li>Priority voice quality</li>
              <li>Call history & details</li>
              <li>API access included</li>
            </ul>
            <button class="pricing-btn primary" onclick="openPurchaseModal('pro')">Buy Pro</button>
          </div>
          <div class="pricing-card">
            <div class="pricing-tier">Enterprise</div>
            <div class="pricing-price">$120 <span>/ 2000 tokens</span></div>
            <div class="pricing-desc">For developers & AI agents</div>
            <ul class="pricing-features">
              <li>2000 call tokens</li>
              <li>REST API + Webhooks</li>
              <li>Custom AI personas</li>
              <li>Bulk calling</li>
            </ul>
            <button class="pricing-btn" onclick="openPurchaseModal('enterprise')">Buy Enterprise</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Calls -->
    <section id="history">
      <div class="container-sm">
        <div class="section-label">History</div>
        <div class="section-title">Recent Calls</div>
        <div class="section-desc">Your calls are stored locally in your browser.</div>
        <div class="calls-list" id="calls-list">
          <div class="empty-calls" id="empty-calls">
            <div class="empty-calls-icon">üìû</div>
            <div>No calls yet. Make your first call above!</div>
          </div>
        </div>
        <div style="text-align:center">
          <button class="clear-history-btn" id="clear-history" style="display:none">Clear History</button>
        </div>
      </div>
    </section>

    <!-- API Section -->
    <section id="api" class="api-section">
      <div class="container">
        <div class="api-grid">
          <div class="api-info">
            <div class="section-label">For Developers</div>
            <div class="section-title" style="margin-bottom:16px">API Access</div>
            <p>Integrate AI phone calls into your app with a single API call. Perfect for AI agents, automation
              workflows,
              and custom integrations.</p>
            <div class="api-endpoint">
              <span class="api-method">POST</span>
              api.moltphone.xyz/call
            </div>
          </div>
          <div class="code-block">
            <button class="code-copy" id="code-copy">Copy</button>
            <pre><code><span style="color:#22c55e">// Make an AI phone call</span>
<span style="color:#c084fc">const</span> response = <span style="color:#c084fc">await</span> <span style="color:#60a5fa">fetch</span>(<span style="color:#fbbf24">'https://api.moltphone.xyz/call'</span>, {
  method: <span style="color:#fbbf24">'POST'</span>,
  headers: {
    <span style="color:#fbbf24">'Authorization'</span>: <span style="color:#fbbf24">'Bearer mp_your_api_key'</span>,
    <span style="color:#fbbf24">'Content-Type'</span>: <span style="color:#fbbf24">'application/json'</span>
  },
  body: JSON.<span style="color:#60a5fa">stringify</span>({
    to_number: <span style="color:#fbbf24">'+15551234567'</span>,
    assistant_config: {
      first_message: <span style="color:#fbbf24">'Hi, can you tell me your office hours?'</span>,
      system_prompt: <span style="color:#fbbf24">'You are a personal assistant. Be polite.'</span>,
      voice: <span style="color:#fbbf24">'alice'</span>,           <span style="color:#22c55e">// optional</span>
      model: <span style="color:#fbbf24">'gpt-4o-mini'</span>,     <span style="color:#22c55e">// optional</span>
      error_message: <span style="color:#fbbf24">'Sorry, could you repeat?'</span> <span style="color:#22c55e">// optional</span>
    }
  })
});

<span style="color:#c084fc">const</span> data = <span style="color:#c084fc">await</span> response.<span style="color:#60a5fa">json</span>();
console.<span style="color:#60a5fa">log</span>(data); <span style="color:#22c55e">// { call: { id, status, ... }, remaining_balance }</span></code></pre>
          </div>
        </div>
      </div>
    </section>

    <!-- API Key Login Modal (for agents only) -->
    <div class="modal-overlay" id="login-modal">
      <div class="modal">
        <button class="modal-close" onclick="closeLoginModal()">&times;</button>
        <h2>üîë Agent Login</h2>
        <p class="subtitle">Enter your MoltPhone API key to sign in as an agent.</p>
        <div class="modal-error" id="login-error"></div>
        <form id="login-form" onsubmit="handleApiKeyLogin(event)">
          <div class="form-group">
            <label class="form-label">API Key</label>
            <input type="text" id="login-apikey" placeholder="mp_..." required>
          </div>
          <button type="submit" class="modal-btn">Sign In with API Key</button>
        </form>
        <div class="modal-switch">
          Not an agent? <a onclick="closeLoginModal(); auth0Login()">Sign in with Auth0</a>
        </div>
      </div>
    </div>


    <!-- Token Purchase Modal -->
    <div class="modal-overlay" id="purchase-modal">
      <div class="modal" style="max-width:560px">
        <button class="modal-close" onclick="closePurchaseModal()">&times;</button>
        <h2>‚ö° Buy Tokens</h2>
        <p class="subtitle">Select a package to add tokens to your account.</p>
        <div class="modal-error" id="purchase-error"></div>
        <div class="modal-success" id="purchase-success"></div>
        <div class="pkg-grid">
          <div class="pkg-card" data-pkg="starter" onclick="selectPackage('starter')">
            <div class="pkg-name">Starter</div>
            <div class="pkg-tokens">100</div>
            <div class="pkg-price">$10</div>
            <div class="pkg-rate">$0.10 / token</div>
          </div>
          <div class="pkg-card" data-pkg="pro" onclick="selectPackage('pro')">
            <div class="pkg-name">Pro</div>
            <div class="pkg-tokens">500</div>
            <div class="pkg-price">$40</div>
            <div class="pkg-rate">$0.08 / token</div>
          </div>
          <div class="pkg-card" data-pkg="enterprise" onclick="selectPackage('enterprise')">
            <div class="pkg-name">Enterprise</div>
            <div class="pkg-tokens">2,000</div>
            <div class="pkg-price">$120</div>
            <div class="pkg-rate">$0.06 / token</div>
          </div>
        </div>
        <button class="modal-btn" id="purchase-btn" onclick="handlePurchase()" disabled>Select a package</button>
        <div class="modal-switch" style="margin-top:12px">
          Not signed up? <a onclick="closePurchaseModal(); auth0Login()">Create account first</a>
        </div>
      </div>
    </div>

  </div><!-- /main-content -->

  <!-- Footer -->
  <footer id="main-footer">
    <div class="container">
      <p>üìû MoltPhone ‚Äî AI Phone Calls &nbsp;¬∑&nbsp; Powered by <a href="https://springsoftware.io"
          target="_blank">Spring
          Software Gibraltar</a> ü¶û</p>
    </div>
  </footer>

  <script>
    // ‚îÄ‚îÄ‚îÄ Config ‚îÄ‚îÄ‚îÄ
    const API_URL = 'https://api.moltphone.xyz/call';
    const API_FALLBACK = 'https://moltphone-oy7ayfiglq-uc.a.run.app/call';
    const STORAGE_KEY = 'moltphone_calls';
    const RATE_KEY = 'moltphone_rate';

    // ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ
    let callTimerInterval = null;
    let callSeconds = 0;

    // ‚îÄ‚îÄ‚îÄ Prompt Presets ‚îÄ‚îÄ‚îÄ
    const PRESETS = {
      restaurant: {
        system_prompt: 'You are a polite personal assistant calling a restaurant to make a reservation on behalf of your client. Confirm the date, time, party size, and any dietary requirements. Once confirmed, repeat the reservation details and say goodbye. End your final message with [END_CALL].',
        first_message: 'Hi, I would like to make a reservation please.',
      },
      inquiry: {
        system_prompt: 'You are a professional assistant calling a business to ask questions on behalf of your client. Be polite, take note of all information provided, and ask follow-up questions if needed. Once you have the answers, thank them and end the call. End your final message with [END_CALL].',
        first_message: 'Hello, I have a few questions I was hoping you could help me with.',
      },
      appointment: {
        system_prompt: 'You are a personal assistant calling to book an appointment on behalf of your client. Confirm date, time, and any preparation needed. Be flexible with scheduling alternatives if the preferred time is unavailable. End your final message with [END_CALL].',
        first_message: 'Hi, I would like to schedule an appointment please.',
      },
      taxi: {
        system_prompt: 'You are a personal assistant calling a taxi or ride service to book a ride on behalf of your client. Confirm pickup location, destination, time, and number of passengers. Once confirmed, repeat all details and say goodbye. End your final message with [END_CALL].',
        first_message: 'Hello, I would like to book a taxi please.',
      },
      cancel: {
        system_prompt: 'You are a personal assistant calling to cancel or reschedule an existing booking on behalf of your client. Be polite, provide the booking reference if available, and confirm the cancellation or new arrangement. End your final message with [END_CALL].',
        first_message: 'Hi, I am calling about an existing booking that I need to change.',
      },
      sales: {
        system_prompt: 'You are a friendly and professional sales representative reaching out to a potential client. Introduce your company and product briefly, gauge their interest, ask about their current needs and pain points, and offer to schedule a follow-up demo or meeting. Do not be pushy ‚Äî focus on building rapport. End your final message with [END_CALL].',
        first_message: 'Hi there, my name is Alex. I am reaching out from our team because we have a solution that might be a great fit for your business. Do you have a moment to chat?',
      },
      marketing: {
        system_prompt: 'You are a marketing specialist following up with a lead who recently engaged with your brand ‚Äî for example, downloaded a resource, attended a webinar, or filled out a form. Your goal is to understand their needs, answer any questions about your services, and see if they would like to schedule a more in-depth conversation. Be warm and conversational, not salesy. End your final message with [END_CALL].',
        first_message: 'Hello! I am calling to follow up ‚Äî we noticed you recently showed interest in our services and I wanted to see if you had any questions we can help with.',
      },
      home_price: {
        system_prompt: 'You are a personal assistant calling a real estate agency or property listing office to inquire about the price and availability of homes for sale. Ask about location, number of bedrooms, square footage, asking price, property condition, and whether viewings can be arranged. Take detailed notes and confirm all information before ending the call. End your final message with [END_CALL].',
        first_message: 'Hi, I am calling to inquire about properties you have listed for sale. Could you share some details on what is currently available?',
      },
      rent_inquiry: {
        system_prompt: 'You are a personal assistant calling a landlord or letting agency to inquire about rental properties on behalf of your client. Ask about monthly rent, deposit requirements, lease terms, included utilities, pet policy, move-in availability, and how to arrange a viewing. Confirm all key details before ending the call. End your final message with [END_CALL].',
        first_message: 'Hello, I am calling about a rental property listing. Could you tell me more about availability and terms?',
      },
      support: {
        system_prompt: 'You are a personal assistant calling a company\'s customer support line on behalf of your client. Clearly describe the issue, provide relevant account or order details when asked, and work with the agent to reach a resolution. Take note of any ticket numbers, next steps, or timelines. Be patient and polite. End your final message with [END_CALL].',
        first_message: 'Hi, I am calling on behalf of a customer who needs help resolving an issue. Can I speak with someone in support?',
      },
      debt: {
        system_prompt: 'You are a professional and courteous collections representative calling to remind a client about an overdue payment. Verify the identity of the person you are speaking with, clearly state the amount owed and the due date, and offer to discuss payment options or set up a payment plan. Remain calm and respectful at all times. End your final message with [END_CALL].',
        first_message: 'Hello, I am calling regarding an outstanding balance on your account. Do you have a moment so we can review this together?',
      },
    };

    function applyPreset(key) {
      if (!key || key === 'custom') return;
      const preset = PRESETS[key];
      if (!preset) return;
      $('#system-prompt').value = preset.system_prompt;
      $('#first-message').value = preset.first_message;
    }

    // ‚îÄ‚îÄ‚îÄ DOM ‚îÄ‚îÄ‚îÄ
    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);

    // ‚îÄ‚îÄ‚îÄ Mobile Menu ‚îÄ‚îÄ‚îÄ
    $('#mobile-menu-btn').addEventListener('click', () => {
      $('#nav-links').classList.toggle('open');
    });
    // Close on nav click
    $$('#nav-links a').forEach(a => a.addEventListener('click', () => {
      $('#nav-links').classList.remove('open');
    }));

    // ‚îÄ‚îÄ‚îÄ Rate Limiting (client-side tracking) ‚îÄ‚îÄ‚îÄ
    function getRateInfo() {
      try {
        const data = JSON.parse(localStorage.getItem(RATE_KEY) || '{}');
        const now = Date.now();
        const hourAgo = now - 3600000;
        const calls = (data.calls || []).filter(t => t > hourAgo);
        return { calls, remaining: Math.max(0, 3 - calls.length) };
      } catch { return { calls: [], remaining: 3 }; }
    }

    function recordCall() {
      const info = getRateInfo();
      info.calls.push(Date.now());
      localStorage.setItem(RATE_KEY, JSON.stringify({ calls: info.calls }));
    }

    function updateRateUI() {
      const { remaining } = getRateInfo();
      $('#calls-remaining').textContent = remaining;
      const dots = $$('#rate-dots .rate-dot');
      dots.forEach((dot, i) => {
        dot.classList.toggle('used', i >= remaining);
      });
      $('#call-btn').disabled = remaining <= 0;
      if (remaining <= 0) {
        $('#call-btn-text').textContent = 'Rate limit reached ‚Äî try again later';
      } else {
        $('#call-btn-text').textContent = 'üìû Call Now ‚Äî Free';
      }
    }

    // ‚îÄ‚îÄ‚îÄ Call History ‚îÄ‚îÄ‚îÄ
    function getHistory() {
      try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); }
      catch { return []; }
    }

    function saveToHistory(entry) {
      const history = getHistory();
      history.unshift(entry);
      if (history.length > 50) history.length = 50;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(history));
    }

    function renderHistory() {
      const history = getHistory();
      const list = $('#calls-list');
      const empty = $('#empty-calls');
      const clearBtn = $('#clear-history');

      if (history.length === 0) {
        empty.style.display = 'block';
        clearBtn.style.display = 'none';
        // Remove non-empty items
        list.querySelectorAll('.call-item').forEach(el => el.remove());
        return;
      }

      empty.style.display = 'none';
      clearBtn.style.display = 'inline-block';
      list.querySelectorAll('.call-item').forEach(el => el.remove());

      history.slice(0, 20).forEach(call => {
        const item = document.createElement('div');
        item.className = 'call-item';
        item.style.cursor = call.callId ? 'pointer' : 'default';
        if (call.callId) {
          item.onclick = () => { location.hash = '#/calls/' + call.callId; };
        }
        const statusClass = call.status === 'completed' ? 'status-completed'
          : call.status === 'failed' ? 'status-failed' : 'status-calling';
        const timeStr = new Date(call.timestamp).toLocaleString(undefined, {
          month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
        });
        item.innerHTML = `
          <div class="call-item-left">
            <div class="call-item-icon">üìû</div>
            <div>
              <div class="call-item-number">${escapeHtml(call.phoneNumber)}</div>
              <div class="call-item-task">${escapeHtml(call.task)}</div>
            </div>
          </div>
          <div class="call-item-right">
            <div class="call-item-time">${timeStr}</div>
            <div class="call-item-status ${statusClass}">${call.status}</div>
          </div>
        `;
        list.appendChild(item);
      });
    }

    $('#clear-history').addEventListener('click', () => {
      if (confirm('Clear all call history?')) {
        localStorage.removeItem(STORAGE_KEY);
        renderHistory();
      }
    });

    // ‚îÄ‚îÄ‚îÄ Form Submit ‚îÄ‚îÄ‚îÄ
    $('#call-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      // Require authentication
      const auth = getAuth();
      if (!auth || (!auth.apiKey && auth.authType !== 'auth0')) {
        showFormError('Please sign in or enter your API key to make calls.');
        return;
      }

      const { remaining } = getRateInfo();
      if (remaining <= 0) {
        showFormError('Rate limit reached. Please wait before making another call.');
        return;
      }

      const phoneRaw = $('#phone-number').value.replace(/[\s\-\(\)]/g, '');
      const countryCode = $('#country-code').value;
      const phoneNumber = countryCode + phoneRaw;
      const firstMessage = $('#first-message').value.trim();
      const systemPrompt = $('#system-prompt').value.trim();
      const agentName = $('#agent-name').value.trim();

      if (!phoneRaw || phoneRaw.length < 4) {
        showFormError('Please enter a valid phone number.');
        return;
      }
      if (!firstMessage) {
        showFormError('Please enter the first message for the AI to say.');
        return;
      }
      if (!systemPrompt) {
        showFormError('Please enter a system prompt for the AI.');
        return;
      }

      // Show progress
      showView('progress');
      $('#status-number').textContent = phoneNumber;
      $('#status-text').textContent = 'Initiating call...';
      $('#call-icon').textContent = 'üìû';
      $('#call-icon').classList.add('ringing');
      $('#wave-container').style.display = 'none';
      startTimer();

      const voice = $('#voice-select').value;
      const model = $('#model-select').value;
      const errorMessage = $('#error-message').value.trim();

      const body = {
        to_number: phoneNumber,
        assistant_config: {
          first_message: firstMessage,
          system_prompt: systemPrompt,
          voice: voice || undefined,
          model: model || undefined,
          error_message: errorMessage || undefined,
        },
      };

      const historyEntry = {
        phoneNumber, task: firstMessage, agentName,
        timestamp: Date.now(), status: 'calling'
      };

      try {
        const headers = await getAuthHeaders();

        let response;
        try {
          response = await fetch(API_URL, {
            method: 'POST', headers, body: JSON.stringify(body)
          });
        } catch {
          // Fallback
          response = await fetch(API_FALLBACK, {
            method: 'POST', headers, body: JSON.stringify(body)
          });
        }

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.error || data.message || `Request failed (${response.status})`);
        }

        // Success
        recordCall();
        updateRateUI();

        $('#status-text').textContent = 'Call initiated!';
        $('#call-icon').textContent = 'üü¢';
        $('#call-icon').classList.remove('ringing');
        $('#wave-container').style.display = 'flex';

        // Wait a moment then show result
        setTimeout(() => {
          stopTimer();
          historyEntry.status = 'completed';
          historyEntry.callId = data.call?.id || data.callId || data.id;
          historyEntry.response = data;
          saveToHistory(historyEntry);
          renderHistory();
          showResult('success', phoneNumber, data);
        }, 3000);

      } catch (err) {
        stopTimer();
        historyEntry.status = 'failed';
        historyEntry.error = err.message;
        saveToHistory(historyEntry);
        renderHistory();

        // Check for rate limit
        if (err.message.toLowerCase().includes('rate') || err.message.toLowerCase().includes('limit')) {
          showResult('ratelimit', phoneNumber, null, err.message);
        } else {
          showResult('error', phoneNumber, null, err.message);
        }
      }
    });

    // ‚îÄ‚îÄ‚îÄ End Call ‚îÄ‚îÄ‚îÄ
    $('#end-call-btn').addEventListener('click', () => {
      stopTimer();
      showView('form');
    });

    // ‚îÄ‚îÄ‚îÄ New Call ‚îÄ‚îÄ‚îÄ
    $('#new-call-btn').addEventListener('click', () => {
      $('#call-form').reset();
      showView('form');
      updateRateUI();
    });

    // ‚îÄ‚îÄ‚îÄ Copy Result ‚îÄ‚îÄ‚îÄ
    $('#copy-result-btn').addEventListener('click', () => {
      const text = $('#result-details').textContent;
      navigator.clipboard.writeText(text).then(() => {
        $('#copy-result-btn').textContent = '‚úÖ Copied!';
        setTimeout(() => { $('#copy-result-btn').textContent = 'üìã Copy Details'; }, 2000);
      });
    });

    // ‚îÄ‚îÄ‚îÄ Copy Code ‚îÄ‚îÄ‚îÄ
    $('#code-copy').addEventListener('click', () => {
      const code = $('pre code').textContent;
      navigator.clipboard.writeText(code).then(() => {
        $('#code-copy').textContent = 'Copied!';
        setTimeout(() => { $('#code-copy').textContent = 'Copy'; }, 2000);
      });
    });

    // ‚îÄ‚îÄ‚îÄ View Management ‚îÄ‚îÄ‚îÄ
    function showView(view) {
      $('#call-form-card').style.display = view === 'form' ? 'block' : 'none';
      $('#call-progress').style.display = 'none';
      $('#call-progress').classList.remove('active');
      $('#call-result').style.display = 'none';
      $('#call-result').classList.remove('active');

      if (view === 'progress') {
        $('#call-progress').style.display = 'block';
        $('#call-progress').classList.add('active');
      } else if (view === 'result') {
        $('#call-result').style.display = 'block';
        $('#call-result').classList.add('active');
      }
    }

    function showResult(type, phone, data, errorMsg) {
      showView('result');
      if (type === 'success') {
        $('#result-icon').textContent = '‚úÖ';
        $('#result-title').textContent = 'Call Initiated!';
        $('#result-sub').textContent = `Calling ${phone}`;
        let details = `Phone: ${phone}\n`;
        if (data) {
          const call = data.call || data;
          if (call.id || data.callId) details += `Call ID: ${call.id || data.callId}\n`;
          if (call.status || data.status) details += `Status: ${call.status || data.status}\n`;
          if (data.remaining_balance !== undefined) details += `Remaining balance: ${data.remaining_balance}\n`;
        }
        $('#result-details').textContent = details;
      } else if (type === 'ratelimit') {
        $('#result-icon').textContent = '‚è≥';
        $('#result-title').textContent = 'Rate Limit Reached';
        $('#result-sub').textContent = 'You can make 3 free calls per hour';
        $('#result-details').textContent = errorMsg || 'Please wait before making another call.';
        updateRateUI();
      } else {
        $('#result-icon').textContent = '‚ùå';
        $('#result-title').textContent = 'Call Failed';
        $('#result-sub').textContent = phone;
        $('#result-details').textContent = errorMsg || 'An unexpected error occurred. Please try again.';
      }
    }

    // ‚îÄ‚îÄ‚îÄ Timer ‚îÄ‚îÄ‚îÄ
    function startTimer() {
      callSeconds = 0;
      $('#call-timer').textContent = '00:00';
      callTimerInterval = setInterval(() => {
        callSeconds++;
        const m = String(Math.floor(callSeconds / 60)).padStart(2, '0');
        const s = String(callSeconds % 60).padStart(2, '0');
        $('#call-timer').textContent = `${m}:${s}`;
      }, 1000);
    }
    function stopTimer() {
      if (callTimerInterval) { clearInterval(callTimerInterval); callTimerInterval = null; }
    }

    // ‚îÄ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ
    function showFormError(msg) {
      const el = $('#form-error');
      el.innerHTML = `<div class="msg-error">${escapeHtml(msg)}</div>`;
      setTimeout(() => { el.innerHTML = ''; }, 5000);
    }

    function escapeHtml(str) {
      const d = document.createElement('div');
      d.textContent = str;
      return d.innerHTML;
    }

    // ‚îÄ‚îÄ‚îÄ Phone formatting ‚îÄ‚îÄ‚îÄ
    $('#phone-number').addEventListener('input', (e) => {
      let v = e.target.value.replace(/[^\d]/g, '');
      // Simple grouping: XXX XXX XXXX
      if (v.length > 6) v = v.slice(0, 3) + ' ' + v.slice(3, 6) + ' ' + v.slice(6, 10);
      else if (v.length > 3) v = v.slice(0, 3) + ' ' + v.slice(3, 6);
      e.target.value = v;
    });

    // ‚îÄ‚îÄ‚îÄ Auth0 Config ‚îÄ‚îÄ‚îÄ
    const AUTH0_DOMAIN = 'dev-qi4l073sys2rptlp.us.auth0.com';
    const AUTH0_CLIENT_ID = '5rqIPtaDw0f07j7Q3DAMfGYYWW8Q0det'; // Moltbot Web SPA
    const AUTH0_AUDIENCE = 'https://api.moltbot.xyz';
    const AUTH_KEY = 'moltphone_auth';
    const API_BASE = 'https://api.moltphone.xyz';
    const API_BASE_FALLBACK = 'https://moltphone-oy7ayfiglq-uc.a.run.app';
    let auth0Client = null;
    let currentAccessToken = null;
    let apiKeyVisible = false;
    let selectedPackage = null;

    // ‚îÄ‚îÄ‚îÄ Auth0 Init ‚îÄ‚îÄ‚îÄ
    async function initAuth0() {
      auth0Client = await auth0.createAuth0Client({
        domain: AUTH0_DOMAIN,
        clientId: AUTH0_CLIENT_ID,
        authorizationParams: {
          redirect_uri: window.location.origin,
          audience: AUTH0_AUDIENCE,
        },
        cacheLocation: 'localstorage',
        useRefreshTokens: true,
      });

      // Handle redirect callback
      const query = window.location.search;
      if (query.includes('code=') && query.includes('state=')) {
        try {
          await auth0Client.handleRedirectCallback();
          window.history.replaceState({}, document.title, window.location.pathname);
        } catch (err) {
          console.error('Auth0 callback error:', err);
        }
      }

      // Check if user is authenticated
      const isAuthenticated = await auth0Client.isAuthenticated();
      if (isAuthenticated) {
        currentAccessToken = await auth0Client.getTokenSilently();
        const user = await auth0Client.getUser();
        setAuth({
          authType: 'auth0',
          email: user.email || '',
          name: user.name || '',
          picture: user.picture || '',
          sub: user.sub,
        });
      } else {
        // Check for API key login
        const saved = getAuth();
        if (saved && saved.authType === 'apikey' && saved.apiKey) {
          // API key login is still valid
        } else {
          clearAuth();
        }
      }

      updateAuthUI();
      updateDashboard();
    }

    // ‚îÄ‚îÄ‚îÄ Auth helpers ‚îÄ‚îÄ‚îÄ
    function getAuth() {
      try { return JSON.parse(localStorage.getItem(AUTH_KEY) || 'null'); } catch { return null; }
    }

    function setAuth(data) {
      localStorage.setItem(AUTH_KEY, JSON.stringify(data));
      updateAuthUI();
      updateDashboard();
    }

    function clearAuth() {
      localStorage.removeItem(AUTH_KEY);
      currentAccessToken = null;
      updateAuthUI();
      updateDashboard();
    }

    async function apiFetch(path, options = {}) {
      try {
        return await fetch(`${API_BASE}${path}`, options);
      } catch {
        return await fetch(`${API_BASE_FALLBACK}${path}`, options);
      }
    }

    async function getAuthHeaders() {
      const auth = getAuth();
      if (!auth) return { 'Content-Type': 'application/json' };

      if (auth.authType === 'auth0' && auth0Client) {
        try {
          currentAccessToken = await auth0Client.getTokenSilently();
          return { 'Authorization': `Bearer ${currentAccessToken}`, 'Content-Type': 'application/json' };
        } catch {
          return { 'Content-Type': 'application/json' };
        }
      } else if (auth.apiKey) {
        return { 'Authorization': `Bearer ${auth.apiKey}`, 'Content-Type': 'application/json' };
      }
      return { 'Content-Type': 'application/json' };
    }

    // Legacy sync version for simple calls
    function authHeaders(apiKey) {
      return { 'Authorization': `Bearer ${apiKey}`, 'Content-Type': 'application/json' };
    }

    function updateAuthUI() {
      const auth = getAuth();
      const area = $('#auth-area');
      if (auth && (auth.authType === 'auth0' || auth.apiKey)) {
        const displayName = auth.name || auth.email || auth.handle || 'User';
        const avatarHtml = auth.picture
          ? `<img class="auth-user-avatar" src="${auth.picture}" alt="">`
          : `<span class="auth-user-badge">PRO</span>`;
        area.innerHTML = `
          <div class="auth-user">
            ${avatarHtml}
            <span class="auth-user-email">${escapeHtml(displayName)}</span>
            <button class="logout-btn" onclick="logout()" title="Sign out">‚úï</button>
          </div>
        `;
      } else {
        area.innerHTML = `
          <button class="auth-btn" onclick="auth0Login()">Sign In</button>
          <button class="auth-btn secondary" onclick="showApiKeyLogin()" style="font-size:0.8rem;padding:6px 14px">API Key</button>
        `;
      }
    }

    // ‚îÄ‚îÄ‚îÄ Dashboard ‚îÄ‚îÄ‚îÄ
    function updateDashboard() {
      const auth = getAuth();
      const panel = $('#dashboard-panel');
      if (auth && (auth.authType === 'auth0' || auth.apiKey)) {
        panel.classList.add('active');
        updateApiKeyDisplay();
        fetchTokenBalance();
      } else {
        panel.classList.remove('active');
      }
    }

    function updateApiKeyDisplay() {
      const auth = getAuth();
      if (!auth) return;
      const el = $('#dash-apikey');
      if (auth.authType === 'auth0') {
        el.textContent = 'Using Auth0 login (no API key)';
        const toggleBtn = $('#dash-toggle');
        const copyBtn = $('#dash-copy');
        if (toggleBtn) toggleBtn.style.display = 'none';
        if (copyBtn) copyBtn.style.display = 'none';
      } else if (auth.apiKey) {
        const toggleBtn = $('#dash-toggle');
        const copyBtn = $('#dash-copy');
        if (toggleBtn) toggleBtn.style.display = '';
        if (copyBtn) copyBtn.style.display = '';
        if (apiKeyVisible) {
          el.textContent = auth.apiKey;
          if (toggleBtn) toggleBtn.textContent = 'Hide';
        } else {
          el.textContent = auth.apiKey.substring(0, 6) + '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
          if (toggleBtn) toggleBtn.textContent = 'Show';
        }
      }
    }

    function toggleApiKeyVisibility() {
      apiKeyVisible = !apiKeyVisible;
      updateApiKeyDisplay();
    }

    function copyDashApiKey() {
      const auth = getAuth();
      if (!auth || !auth.apiKey) return;
      navigator.clipboard.writeText(auth.apiKey).then(() => {
        const btn = $('#dash-copy');
        btn.textContent = '‚úÖ Copied!';
        setTimeout(() => { btn.textContent = 'Copy'; }, 2000);
      });
    }

    async function fetchTokenBalance() {
      const auth = getAuth();
      if (!auth) return;
      try {
        const headers = await getAuthHeaders();
        const res = await apiFetch('/tokens/balance', { headers });
        if (res.ok) {
          const data = await res.json();
          $('#dash-token-balance').textContent = data.balance.toLocaleString();
        }
      } catch { /* silent fail */ }
    }

    // ‚îÄ‚îÄ‚îÄ Auth0 Login / Logout ‚îÄ‚îÄ‚îÄ
    async function auth0Login() {
      if (!auth0Client) return;
      await auth0Client.loginWithRedirect({
        authorizationParams: { screen_hint: 'signup' },
      });
    }

    async function auth0SignIn() {
      if (!auth0Client) return;
      await auth0Client.loginWithRedirect();
    }

    async function logout() {
      const auth = getAuth();
      clearAuth();
      if (auth && auth.authType === 'auth0' && auth0Client) {
        await auth0Client.logout({ logoutParams: { returnTo: window.location.origin } });
      }
    }

    // ‚îÄ‚îÄ‚îÄ API Key Login (for agents) ‚îÄ‚îÄ‚îÄ
    function showApiKeyLogin() {
      $('#login-modal').classList.add('active');
      $('#login-error').style.display = 'none';
    }

    function closeLoginModal() {
      $('#login-modal').classList.remove('active');
    }

    async function handleApiKeyLogin(e) {
      e.preventDefault();
      const apiKey = $('#login-apikey').value.trim();
      const errEl = $('#login-error');
      errEl.style.display = 'none';

      if (!apiKey) { errEl.textContent = 'Please enter your API key.'; errEl.style.display = 'block'; return; }

      try {
        const response = await apiFetch('/me', { headers: { 'Authorization': `Bearer ${apiKey}` } });
        if (!response.ok) throw new Error('Invalid API key');
        const data = await response.json();
        setAuth({ authType: 'apikey', apiKey, handle: data.handle || 'user', email: data.email || '' });
        closeLoginModal();
      } catch (err) {
        errEl.textContent = err.message;
        errEl.style.display = 'block';
      }
    }

    // ‚îÄ‚îÄ‚îÄ Token Purchase Modal ‚îÄ‚îÄ‚îÄ
    function openPurchaseModal(preselect) {
      const auth = getAuth();
      if (!auth || (!auth.apiKey && auth.authType !== 'auth0')) {
        auth0Login();
        return;
      }
      selectedPackage = null;
      $$('.pkg-card').forEach(c => c.classList.remove('selected'));
      $('#purchase-error').style.display = 'none';
      $('#purchase-success').style.display = 'none';
      $('#purchase-btn').disabled = true;
      $('#purchase-btn').textContent = 'Select a package';
      $('#purchase-modal').classList.add('active');
      if (preselect) selectPackage(preselect);
    }

    function closePurchaseModal() {
      $('#purchase-modal').classList.remove('active');
    }

    function selectPackage(pkg) {
      selectedPackage = pkg;
      $$('.pkg-card').forEach(c => {
        c.classList.toggle('selected', c.dataset.pkg === pkg);
      });
      const names = { starter: 'Buy Starter ‚Äî $10', pro: 'Buy Pro ‚Äî $40', enterprise: 'Buy Enterprise ‚Äî $120' };
      $('#purchase-btn').disabled = false;
      $('#purchase-btn').textContent = names[pkg] || 'Buy';
    }

    async function handlePurchase() {
      if (!selectedPackage) return;
      const auth = getAuth();
      if (!auth) { openPurchaseModal(); return; }

      const btn = $('#purchase-btn');
      const errEl = $('#purchase-error');
      const successEl = $('#purchase-success');
      errEl.style.display = 'none';
      successEl.style.display = 'none';
      btn.disabled = true;
      btn.textContent = 'Redirecting to payment...';

      try {
        const headers = await getAuthHeaders();
        const res = await apiFetch('/tokens/checkout', {
          method: 'POST',
          headers,
          body: JSON.stringify({ package: selectedPackage }),
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || data.message || 'Checkout failed');

        // Redirect to Stripe Checkout
        if (data.url) {
          window.location.href = data.url;
        } else {
          throw new Error('No checkout URL returned');
        }
      } catch (err) {
        errEl.textContent = err.message;
        errEl.style.display = 'block';
        btn.disabled = false;
        const names = { starter: 'Buy Starter ‚Äî $10', pro: 'Buy Pro ‚Äî $40', enterprise: 'Buy Enterprise ‚Äî $120' };
        btn.textContent = names[selectedPackage] || 'Retry';
      }
    }

    // ‚îÄ‚îÄ‚îÄ Upgrade Banner ‚îÄ‚îÄ‚îÄ
    function checkUpgradeBanner() {
      const auth = getAuth();
      const { remaining } = getRateInfo();
      const banner = $('#upgrade-banner');
      if (!auth && remaining <= 0) {
        banner.classList.add('active');
      } else {
        banner.classList.remove('active');
      }
    }

    // Patch updateRateUI to also check upgrade banner
    const _origUpdateRateUI = updateRateUI;
    updateRateUI = function () {
      _origUpdateRateUI();
      checkUpgradeBanner();
    };

    // ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ
    initAuth0().then(() => {
      updateRateUI();
      renderHistory();

      // Handle Stripe Checkout return
      const urlParams = new URLSearchParams(window.location.search);
      const checkoutResult = urlParams.get('checkout');
      if (checkoutResult === 'success') {
        // Show a brief success banner and refresh balance
        const banner = document.createElement('div');
        banner.id = 'checkout-success-banner';
        banner.style.cssText = 'position:fixed;top:72px;left:50%;transform:translateX(-50%);background:#16a34a;color:#fff;padding:12px 28px;border-radius:12px;font-weight:600;z-index:999;box-shadow:0 4px 24px rgba(0,0,0,.4);';
        banner.textContent = '‚úÖ Payment successful! Tokens will be credited shortly.';
        document.body.appendChild(banner);
        setTimeout(() => banner.remove(), 5000);
        // Clean URL
        window.history.replaceState({}, document.title, window.location.pathname);
        // Refresh balance after short delay (webhook may not be instant)
        setTimeout(fetchTokenBalance, 3000);
      } else if (checkoutResult === 'cancelled') {
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    }).catch(err => {
      console.error('Auth0 init failed:', err);
      updateAuthUI();
      updateDashboard();
      updateRateUI();
      renderHistory();
    });

    // Refresh rate limit display every 30s
    setInterval(updateRateUI, 30000);
    // Refresh token balance every 60s
    setInterval(fetchTokenBalance, 60000);

    // ‚îÄ‚îÄ‚îÄ Call Detail Page ‚Äî Hash Routing ‚îÄ‚îÄ‚îÄ
    function navigateHome() {
      location.hash = '';
    }

    function handleRouting() {
      const hash = location.hash;
      const callMatch = hash.match(/^#\/calls\/(.+)$/);
      const detailPage = $('#call-detail-page');
      const mainContent = $('#main-content');
      const mainFooter = $('#main-footer');

      if (callMatch) {
        const callId = callMatch[1];
        mainContent.style.display = 'none';
        mainFooter.style.display = 'none';
        detailPage.classList.add('active');
        loadCallDetail(callId);
        window.scrollTo(0, 0);
      } else {
        detailPage.classList.remove('active');
        mainContent.style.display = '';
        mainFooter.style.display = '';
      }
    }

    window.addEventListener('hashchange', handleRouting);

    // Check on initial load
    if (location.hash.match(/^#\/calls\/.+$/)) {
      handleRouting();
    }

    async function loadCallDetail(callId) {
      const container = $('#call-detail-content');
      container.innerHTML = `
        <div class="detail-loading">
          <div class="spinner-large"></div>
          <div>Loading call details...</div>
        </div>
      `;

      try {
        const headers = await getAuthHeaders();

        // Fetch call details and transcript in parallel
        const [callRes, transcriptRes] = await Promise.all([
          apiFetch('/calls/' + callId, { headers }),
          apiFetch('/calls/' + callId + '/transcript', { headers }),
        ]);

        if (!callRes.ok) {
          const err = await callRes.json().catch(() => ({}));
          throw new Error(err.error || err.message || 'Call not found (' + callRes.status + ')');
        }

        const callData = await callRes.json();
        const call = callData.call || callData;

        let transcript = [];
        if (transcriptRes.ok) {
          const tData = await transcriptRes.json();
          transcript = tData.transcript || tData.transcripts || [];
        }

        renderCallDetailPage(call, transcript);
      } catch (err) {
        container.innerHTML = `
          <div class="detail-error">
            <div class="detail-error-icon">‚ùå</div>
            <div style="font-size:1.1rem;font-weight:600;margin-bottom:8px">Failed to load call</div>
            <div style="color:var(--text-dim)">${escapeHtml(err.message)}</div>
            <button class="result-btn result-btn-secondary" style="margin-top:20px" onclick="navigateHome()">‚Üê Back</button>
          </div>
        `;
      }
    }

    function formatDuration(seconds) {
      if (!seconds && seconds !== 0) return '‚Äî';
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      return m > 0 ? m + 'm ' + s + 's' : s + 's';
    }

    function formatTimestamp(ts) {
      if (!ts) return '‚Äî';
      try {
        return new Date(ts).toLocaleString(undefined, {
          year: 'numeric', month: 'short', day: 'numeric',
          hour: '2-digit', minute: '2-digit', second: '2-digit',
        });
      } catch { return ts; }
    }

    function getStatusBadge(status, callResult) {
      let cls = 'status-calling';
      let label = status || 'unknown';
      if (status === 'completed' || callResult === 'success') {
        cls = 'status-completed';
        label = 'Completed';
      } else if (status === 'failed' || callResult === 'failure') {
        cls = 'status-failed';
        label = 'Failed';
      } else if (status === 'in-progress') {
        cls = 'status-calling';
        label = 'In Progress';
      } else if (status === 'queued' || status === 'initiated' || status === 'ringing') {
        cls = 'status-calling';
      }
      return '<span class="call-detail-status-badge ' + cls + '">' + escapeHtml(label) + '</span>';
    }

    function renderCallDetailPage(call, transcript) {
      const container = $('#call-detail-content');
      const config = call.assistantConfig || {};

      let html = '';

      // Title row
      html += '<div class="call-detail-title-row">';
      html += '  <div class="call-detail-title">üìû ' + escapeHtml(call.toNumber || call.to_number || 'Unknown') + '</div>';
      html += '  ' + getStatusBadge(call.status, call.callResult);
      html += '</div>';
      html += '<div class="call-detail-subtitle">Call ID: ' + escapeHtml(call.id || '‚Äî') + '</div>';

      // Meta grid
      html += '<div class="detail-meta-grid">';
      html += '  <div class="detail-meta-card"><div class="meta-label">Duration</div><div class="meta-value accent">' + formatDuration(call.duration) + '</div></div>';
      html += '  <div class="detail-meta-card"><div class="meta-label">Mode</div><div class="meta-value">' + escapeHtml(call.mode || '‚Äî') + '</div></div>';
      html += '  <div class="detail-meta-card"><div class="meta-label">Direction</div><div class="meta-value">' + escapeHtml(call.direction || '‚Äî') + '</div></div>';
      html += '  <div class="detail-meta-card"><div class="meta-label">Started</div><div class="meta-value">' + formatTimestamp(call.createdAt) + '</div></div>';
      if (call.endedAt) {
        html += '  <div class="detail-meta-card"><div class="meta-label">Ended</div><div class="meta-value">' + formatTimestamp(call.endedAt) + '</div></div>';
      }
      if (call.twilioCallSid) {
        html += '  <div class="detail-meta-card"><div class="meta-label">Twilio SID</div><div class="meta-value" style="font-size:0.8rem;font-family:monospace;word-break:break-all">' + escapeHtml(call.twilioCallSid) + '</div></div>';
      }
      html += '</div>';

      // Assistant config
      html += '<div class="detail-section">';
      html += '  <div class="detail-section-title">ü§ñ Assistant Configuration</div>';
      if (config.first_message || config.firstMessage) {
        html += '  <div class="config-item"><div class="config-label">First Message</div><div class="config-value mono">' + escapeHtml(config.first_message || config.firstMessage || '') + '</div></div>';
      }
      if (config.system_prompt || config.systemPrompt) {
        html += '  <div class="config-item"><div class="config-label">System Prompt</div><div class="config-value mono">' + escapeHtml(config.system_prompt || config.systemPrompt || '') + '</div></div>';
      }
      const configMeta = [];
      if (config.voice) configMeta.push('Voice: ' + config.voice);
      if (config.model) configMeta.push('Model: ' + config.model);
      if (config.error_message || config.errorMessage) configMeta.push('Error: ' + (config.error_message || config.errorMessage));
      if (configMeta.length) {
        html += '  <div class="config-item"><div class="config-label">Settings</div><div class="config-value">' + escapeHtml(configMeta.join('  ¬∑  ')) + '</div></div>';
      }
      html += '</div>';

      // Transcript
      html += '<div class="detail-section">';
      html += '  <div class="detail-section-title">üí¨ Transcript (' + transcript.length + ' messages)</div>';
      if (transcript.length === 0) {
        html += '  <div class="transcript-empty">No transcript available. The call may still be in progress or no conversation was recorded.</div>';
      } else {
        html += '  <div class="transcript-container">';
        const sorted = transcript.sort((a, b) => (a.timestamp || '').localeCompare(b.timestamp || ''));
        sorted.forEach(entry => {
          const isAI = entry.role !== 'user';
          const roleLabel = isAI ? 'ü§ñ AI' : 'üßë Caller';
          const bubbleClass = isAI ? 'ai' : 'user';
          html += '<div class="transcript-bubble ' + bubbleClass + '">';
          html += '  <div class="transcript-role">' + roleLabel + '</div>';
          html += '  <div class="transcript-content">' + escapeHtml(entry.content || '') + '</div>';
          if (entry.timestamp) {
            html += '  <div class="transcript-time">' + formatTimestamp(entry.timestamp) + '</div>';
          }
          html += '</div>';
        });
        html += '  </div>';
      }
      html += '</div>';

      container.innerHTML = html;
    }
  </script>
</body>

</html>