# SeedGPT Roadmap — Moltbot Work
#
# This file tracks the project roadmap with versions and items.
# v0 = MVP: Core infrastructure + MoltBank production-ready
# v1 = Growth: Complete ecosystem with all services as full-stack apps
#
# CROSS-REFERENCE SCHEMA:
#   RM-{version}-###  → Roadmap Item ID
#   prd_refs          → Links to PRD requirements (PRD-###)
#   sprint_refs       → Links to sprint tasks (SP-###-###)

current_version: v0

versions:
  - id: v0
    label: "MVP"
    description: >
      Transform the naive prototypes into production-ready services.
      Focus on MoltBank as the flagship product with real backend,
      database, and deployment infrastructure.
    status: complete
    items:
      - id: v0-monorepo-setup
        description: |
          Set up the monorepo structure for all Molt services:
          - Create `packages/` directory for shared code
          - Create `services/` directory for each service (moltbank, moltcredit, moltmail, moltphone)
          - Set up TypeScript configuration with project references
          - Add root package.json with workspace configuration
          - Move existing landing pages to `services/{name}/static/`
        priority: high
        status: complete
        sprint_refs: [SP-V01-001, SP-V01-004, SP-V01-005]
        dependencies: []

      - id: v0-shared-lib
        description: |
          Create shared library package (`packages/shared`):
          - Database connection utilities (pg-pool)
          - API key generation and validation
          - Request/response type definitions
          - Logger configuration (pino or similar)
          - Environment variable handling
          - Error handling utilities
        priority: high
        status: complete
        sprint_refs: [SP-V01-002]
        dependencies:
          - v0-monorepo-setup

      - id: v0-database-schema
        description: |
          Design and implement PostgreSQL database schema:
          - `agents` table: id, handle, name, api_key_hash, metadata, created_at
          - `wallets` table: agent_id, balance, currency, created_at
          - `transactions` table: id, from_agent, to_agent, amount, type, memo, created_at
          - `escrows` table: id, creator_id, counterparty_id, amount, status, description, created_at
          - Create migration files using node-pg-migrate or similar
          - Add seed data for development
        priority: high
        status: complete
        sprint_refs: [SP-V01-003]
        dependencies:
          - v0-shared-lib

      - id: v0-agent-registration
        description: |
          Implement agent registration service:
          - POST /register endpoint
          - Handle validation (alphanumeric, unique, etc.)
          - API key generation (secure random with prefix)
          - Hash API keys before storage
          - Return API key only once on creation
          - Add to shared auth middleware
        priority: high
        status: complete
        sprint_refs: [SP-V02-001]
        dependencies:
          - v0-database-schema

      - id: v0-moltbank-api
        description: |
          Implement MoltBank backend API (`services/moltbank`):
          - GET /wallet — balance and recent transactions
          - POST /wallet/deposit — add funds (simulated)
          - POST /wallet/transfer — send to other agent
          - GET /wallet/transactions — paginated history
          - POST /escrow/create — lock funds in escrow
          - GET /escrow — list agent's escrows
          - POST /escrow/:id/release — release to counterparty
          - POST /escrow/:id/dispute — flag for dispute
          - GET /leaderboard — top agents by volume
          - GET /stats — global statistics
        priority: high
        status: complete
        sprint_refs: [SP-V02-002, SP-V02-003, SP-V02-004]
        dependencies:
          - v0-agent-registration

      - id: v0-moltcredit-api
        description: |
          Implement MoltCredit backend API (`services/moltcredit`):
          - POST /credit/extend — create credit line
          - GET /credit — view incoming/outgoing lines
          - POST /credit/:id/draw — draw against credit
          - POST /credit/:id/repay — repay credit
          - GET /credit/balance/:handle — check balance with specific agent
          - GET /trust/:handle — trust score and credit summary
          - Add credit_lines and credit_transactions tables to database schema
        priority: medium
        status: complete
        sprint_refs: [SP-V04-001, SP-V04-002, SP-V04-003, SP-V04-004, SP-V04-009]
        dependencies:
          - v0-agent-registration

      - id: v0-deployment
        description: |
          Set up production deployment infrastructure:
          - Dockerfile for each service
          - docker-compose.yml for local development
          - Cloud Run deployment configuration
          - Environment variable documentation
          - Health check endpoints (/health, /ready)
          - Structured logging (JSON format)
        priority: high
        status: complete
        sprint_refs: [SP-V03-001, SP-V03-002, SP-V04-005, SP-V05-006, SP-V06-005, SP-V07-007]
        dependencies:
          - v0-moltbank-api

      - id: v0-api-docs
        description: |
          Create OpenAPI documentation:
          - OpenAPI 3.0 spec for MoltBank
          - OpenAPI 3.0 spec for MoltCredit
          - OpenAPI 3.0 spec for AgentMail
          - OpenAPI 3.0 spec for MoltPhone
          - Serve docs at /docs endpoint (Swagger UI)
          - Include authentication examples
          - Add to each service's static files
        priority: medium
        status: complete
        sprint_refs: [SP-V03-003, SP-V04-006, SP-V05-007, SP-V06-006]
        dependencies:
          - v0-moltbank-api
          - v0-moltcredit-api

      - id: v0-webapp-integration
        description: |
          Update existing webapps and create new ones to use real backends:
          - Update moltbank-webapp to call deployed MoltBank API
          - Create moltcredit-webapp for credit management
          - Create agentmail-webapp for email management
          - Update moltphone-webapp to call deployed MoltPhone API
          - Fix authentication flow on all webapps
          - Handle error states and loading states properly
        priority: medium
        status: complete
        sprint_refs: [SP-V03-004, SP-V03-005, SP-V04-007, SP-V04-008, SP-V05-008, SP-V05-009, SP-V06-007, SP-V06-008]
        dependencies:
          - v0-deployment

  - id: v1
    label: "Growth"
    description: >
      Complete the Molt ecosystem with AgentMail and MoltPhone,
      add comprehensive testing, monitoring, cross-service integration,
      and production hardening.
    status: complete
    items:
      - id: v1-moltmail-api
        description: |
          Implement AgentMail backend API (`services/moltmail`):
          - Agent email provisioning (handle@agentmail.xyz)
          - POST /send — send email
          - GET /inbox — list received emails
          - GET /inbox/:id — get specific email
          - POST /webhooks/inbound — receive incoming mail from provider
          - POST /webhooks/subscribe — agent webhook registration
          - Rate limiting (100 emails/hour per agent)
          - Integration with email provider (Resend/Postmark)
          - Add emails, email_addresses, and email_webhooks tables
        priority: medium
        status: complete
        sprint_refs: [SP-V05-001, SP-V05-002, SP-V05-003, SP-V05-004, SP-V05-005, SP-V05-010]
        dependencies:
          - v0-deployment

      - id: v1-moltphone-api
        description: |
          Implement MoltPhone backend API (`services/moltphone`):
          - POST /call — initiate outbound call via Vapi
          - GET /calls — list call history
          - GET /calls/:id — get call details with transcript
          - POST /webhooks/vapi — receive Vapi callbacks
          - POST /webhooks/subscribe — agent webhook registration
          - Rate limiting (10 concurrent calls per agent)
          - Add calls, transcripts, and call_webhooks tables
        priority: medium
        status: complete
        sprint_refs: [SP-V06-001, SP-V06-002, SP-V06-003, SP-V06-004, SP-V06-009]
        dependencies:
          - v0-deployment

      - id: v1-testing
        description: |
          Add comprehensive test coverage:
          - Jest configuration for all packages
          - Unit tests for shared library and all services
          - Integration tests for each API
          - Test database setup with migrations
          - E2E smoke tests across all services
          - CI workflow with Postgres service container
        priority: medium
        status: complete
        sprint_refs: [SP-V04-009, SP-V05-010, SP-V06-009, SP-V08-003, SP-V08-004]
        dependencies:
          - v1-moltmail-api
          - v1-moltphone-api

      - id: v1-monitoring
        description: |
          Add monitoring and alerting:
          - Error tracking (Sentry integration)
          - Request metrics (latency, error rates)
          - Database connection monitoring
          - GCP Cloud Monitoring dashboards
          - Alerting for critical failures
        priority: low
        status: complete
        sprint_refs: [SP-V08-001, SP-V08-002]
        dependencies:
          - v1-testing

      - id: v1-cross-service
        description: |
          Implement cross-service integrations:
          - MoltBank settlement from MoltCredit
          - Trust score integration in MoltBank leaderboard
          - Unified agent directory across services
        priority: low
        status: complete
        sprint_refs: [SP-V07-001, SP-V07-002, SP-V07-003]
        dependencies:
          - v1-moltmail-api
          - v1-moltphone-api

      - id: v1-moltcredit-webapp
        description: |
          Web application for MoltCredit (app.moltcredit.xyz):
          - Dashboard with credit lines given and received
          - Extend credit, draw, repay forms
          - Trust score display
          - Transaction history per credit line
        priority: medium
        status: complete
        sprint_refs: [SP-V04-007]
        dependencies:
          - v0-moltcredit-api

      - id: v1-agentmail-webapp
        description: |
          Web application for AgentMail (app.agentmail.xyz):
          - Inbox view with received emails
          - Compose and send email form
          - Sent folder, webhook management
          - Email address management
        priority: medium
        status: complete
        sprint_refs: [SP-V05-008]
        dependencies:
          - v1-moltmail-api

      - id: v1-landing-updates
        description: |
          Update all four landing pages to link to live products:
          - Add CTAs to webapps and API docs
          - Real product screenshots
          - SEO meta tags and OG images
          - Mobile responsive verification
        priority: low
        status: complete
        sprint_refs: [SP-V03-005, SP-V04-008, SP-V05-009, SP-V06-008, SP-V08-005]
        dependencies:
          - v0-webapp-integration

      - id: v1-production-hardening
        description: |
          Security and production hardening:
          - Per-agent rate limiting on all services
          - API key rotation with grace period
          - Input validation audit (Zod on all endpoints)
          - SQL injection prevention review
        priority: medium
        status: complete
        sprint_refs: [SP-V07-004, SP-V07-005, SP-V07-006]
        dependencies:
          - v1-testing
